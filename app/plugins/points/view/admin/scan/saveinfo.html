{{:ModuleInclude('public/header')}}

<!-- right content start  -->
<div class="content-right">
    <div class="content">
        <!-- form start -->
        <form class="am-form form-validation am-form-full-screen am-form-popup-fixed" action="{{:PluginsAdminUrl('points', 'scan', 'save')}}" method="POST" request-type="ajax-reload" request-value="parent">
            <div class="am-form-group row">
                <label>名称<span class="am-form-group-label-tips-must">*</span></label>
                <input type="text" name="name" placeholder="名称" maxlength="30" data-validation-message="名称格式最多30个字符" class="am-radius" value="{{if !empty($data['name'])}}{{$data.name}}{{/if}}" required />
            </div>
            {{if !isset($data['qrcode_count']) or $data['qrcode_count'] eq 0}}
                <div class="am-form-group row">
                    <label>{{:MyLang('form_platform_title')}}<span class="am-form-group-label-tips-must">*</span></label>
                    <select name="platform" class="am-radius chosen-select" data-placeholder="{{:MyLang('optional_tips')}}" data-validation-message="{{:MyLang('form_platform_message')}}" required>
                        <option value="">{{:MyLang('optional_tips')}}</option>
                        {{foreach :MyConst('common_platform_type') as $v}}
                            <option value="{{$v.value}}" {{if isset($data['platform']) and $data['platform'] eq $v['value']}}selected{{else /}}{{if !isset($data['platform']) and isset($v['checked']) and $v['checked'] eq true}}selected{{/if}}{{/if}}>{{$v.name}}</option>
                        {{/foreach}}
                    </select>
                </div>
                <div class="am-form-group row">
                    <label class="am-block">品牌分类<span class="am-form-group-label-tips-must">*</span></label>
                    <select name="brand_category_id" class="am-radius chosen-select" data-placeholder="{{:MyLang('please_select_tips')}}" data-validation-message="请选择品牌分类" required>
                        {{if !empty($brand_category_list)}}
                            <option value="0">{{:MyLang('please_select_tips')}}</option>
                            {{foreach $brand_category_list as $v}}
                                <option value="{{$v.id}}" {{if isset($data['brand_category_id']) and $data['brand_category_id'] eq $v['id']}}selected{{/if}}>{{$v.name}}</option>
                            {{/foreach}}
                        {{/if}}
                    </select>
                </div>
                <div class="am-form-group row">
                    <label class="am-block">品牌<span class="am-form-group-label-tips-must">*</span></label>
                    <select name="brand_id" class="am-radius chosen-select" data-placeholder="{{:MyLang('please_select_tips')}}" data-validation-message="请选择品牌" required>
                        {{if !empty($brand_list)}}
                            <option value="0">{{:MyLang('please_select_tips')}}</option>
                            {{foreach $brand_list as $v}}
                                <option value="{{$v.id}}" {{if isset($data['brand_id']) and $data['brand_id'] eq $v['id']}}selected{{/if}}>{{$v.name}}</option>
                            {{/foreach}}
                        {{/if}}
                    </select>
                </div>
                <div class="am-form-group row">
                    <label>赠送积分<span class="am-form-group-label-tips-must">*</span></label>
                    <input type="number" name="integral" placeholder="赠送积分" min="0" data-validation-message="请填写赠送积分" class="am-radius" value="{{if !empty($data['integral'])}}{{$data.integral}}{{/if}}" required />
                </div>
            {{/if}}
            <div class="am-form-group row">
                <label class="am-block">{{:MyLang('form_is_enable_title')}}</label>
                <input name="is_enable" value="1" type="checkbox" data-off-text="{{:MyLang('no_title')}}" data-on-text="{{:MyLang('yes_title')}}" data-size="xs" data-on-color="success" data-off-color="default" data-handle-width="50" data-am-switch {{if !isset($data['is_enable']) or (isset($data['is_enable']) and $data['is_enable'] eq 1)}}checked="true"{{/if}} />
            </div>

            <div class="am-form-popup-submit">
                <input type="hidden" name="id" value="{{if !empty($data['id'])}}{{$data.id}}{{/if}}" />
                <button type="button" class="am-btn am-btn-warning am-radius am-btn-xs am-margin-right-lg" data-am-modal-close>
                    <i class="am-icon-paint-brush"></i>
                    <span>{{:MyLang('cancel_title')}}</span>
                </button>
                <button type="submit" class="am-btn am-btn-primary am-radius am-btn-xs btn-loading-example" data-am-loading="{spinner: 'circle-o-notch', loadingText:'{{:MyLang('save_title')}}'}">
                    <i class="am-icon-save"></i>
                    <span>{{:MyLang('save_title')}}</span>
                </button>
            </div>
        </form>
        <!-- form end -->
    </div>
</div>
<!-- right content end  -->

<!-- footer start -->
{{:ModuleInclude('public/footer')}}